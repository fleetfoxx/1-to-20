import{r as de,x as Q,s as L,n as A}from"../chunks/scheduler.aZHIKDCl.js";import{a as j,t as B,S as W,i as F,e as w,b as E,s as V,c as y,d as C,f as I,g as _,h as M,o as g,j as N,k as m,l as D,y as U,q as he,n as ve,m as H,u as X,v as Z,w as G,x as ee,z as S}from"../chunks/index.Qdoo0E4t.js";import{w as Y}from"../chunks/index.Haq8omwQ.js";function ae(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function pe(s,e){j(s,1,1,()=>{e.delete(s.key)})}function me(s,e,t,a,n,l,o,r,i,u,c,h){let f=s.length,d=l.length,v=f;const b={};for(;v--;)b[s[v].key]=v;const p=[],x=new Map,J=new Map,le=[];for(v=d;v--;){const k=h(n,l,v),q=t(k);let $=o.get(q);$?le.push(()=>$.p(k,e)):($=u(q,k),$.c()),x.set(q,p[v]=$),q in b&&J.set(q,Math.abs(v-b[q]))}const ne=new Set,se=new Set;function K(k){B(k,1),k.m(r,c),o.set(k.key,k),c=k.first,d--}for(;f&&d;){const k=p[d-1],q=s[f-1],$=k.key,z=q.key;k===q?(c=k.first,f--,d--):x.has(z)?!o.has($)||ne.has($)?K(k):se.has(z)?f--:J.get($)>J.get(z)?(se.add($),K(k)):(ne.add(z),f--):(i(q,o),f--)}for(;f--;){const k=s[f];x.has(k.key)||i(k,o)}for(;d;)K(p[d-1]);return de(le),p}const ce=()=>new Array(20).fill(null),O=Y(ce()),R=Y(null);var P=(s=>(s[s.ValidMoves=0]="ValidMoves",s[s.NoValidMoves=1]="NoValidMoves",s[s.Win=2]="Win",s))(P||{});const T=Y(0),te=Y([]),ie=()=>Math.floor(Math.random()*1e3+1),fe=()=>{const s=Q(O);let e=ie();for(;s.includes(e);)e=ie();if(R.set(e),s.every(t=>t===null)){T.set(0);const t=[];for(let a=0;a<s.length;a++)t.push(a);te.set(t)}else{const t=[];let a=0,n=-1,l=s.length;for(let o=0;o<s.length;o++){const r=s[o];if(r!==null){if(r<e&&r>a){a=r,n=o;continue}if(r>e){l=o;break}}}for(let o=n+1;o<l;o++)t.push(o);t.length===0?T.set(1):(T.set(0),te.set(t))}},_e=s=>{O.update(t=>(t[s]=Q(R),t)),Q(O).every(t=>t!==null)?T.set(2):fe()},be=()=>{O.set(ce()),T.set(0),R.set(null)};function ge(s){let e,t;return{c(){e=w("span"),t=E(s[1]),this.h()},l(a){e=y(a,"SPAN",{class:!0});var n=C(e);t=I(n,s[1]),n.forEach(_),this.h()},h(){g(e,"class","locked-in svelte-1tagpqf")},m(a,n){N(a,e,n),m(e,t)},p(a,n){n&2&&D(t,a[1])},d(a){a&&_(e)}}}function we(s){let e,t,a;return{c(){e=w("button"),this.h()},l(n){e=y(n,"BUTTON",{class:!0}),C(e).forEach(_),this.h()},h(){g(e,"class","blank-button svelte-1tagpqf"),e.disabled=s[2]},m(n,l){N(n,e,l),t||(a=U(e,"click",s[3]),t=!0)},p(n,l){l&4&&(e.disabled=n[2])},d(n){n&&_(e),t=!1,a()}}}function ye(s){let e,t,a=s[0]+1+"",n,l,o;function r(c,h){return c[1]===null?we:ge}let i=r(s),u=i(s);return{c(){e=w("div"),t=w("span"),n=E(a),l=E("."),o=V(),u.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var h=C(e);t=y(h,"SPAN",{class:!0});var f=C(t);n=I(f,a),l=I(f,"."),f.forEach(_),o=M(h),u.l(h),h.forEach(_),this.h()},h(){g(t,"class","row-number svelte-1tagpqf"),g(e,"class","number-row svelte-1tagpqf")},m(c,h){N(c,e,h),m(e,t),m(t,n),m(t,l),m(e,o),u.m(e,null)},p(c,[h]){h&1&&a!==(a=c[0]+1+"")&&D(n,a),i===(i=r(c))&&u?u.p(c,h):(u.d(1),u=i(c),u&&(u.c(),u.m(e,null)))},i:A,o:A,d(c){c&&_(e),u.d()}}}function ke(s,e,t){let a,n=null;R.subscribe(c=>{t(4,n=c)});let l=P.ValidMoves;T.subscribe(c=>{t(5,l=c)});let o=[];te.subscribe(c=>{t(6,o=c)});let{index:r}=e,{value:i}=e;const u=()=>{_e(r)};return s.$$set=c=>{"index"in c&&t(0,r=c.index),"value"in c&&t(1,i=c.value)},s.$$.update=()=>{s.$$.dirty&113&&t(2,a=l!==P.ValidMoves||n===null||!o.includes(r))},[r,i,a,u,n,l,o]}class Ne extends W{constructor(e){super(),F(this,e,ke,ye,L,{index:0,value:1})}}function re(s,e,t){const a=s.slice();return a[1]=e[t],a[3]=t,a}function oe(s,e){let t,a,n;return a=new Ne({props:{index:e[3],value:e[1]}}),{key:s,first:null,c(){t=H(),X(a.$$.fragment),this.h()},l(l){t=H(),Z(a.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){N(l,t,o),G(a,l,o),n=!0},p(l,o){e=l;const r={};o&1&&(r.index=e[3]),o&1&&(r.value=e[1]),a.$set(r)},i(l){n||(B(a.$$.fragment,l),n=!0)},o(l){j(a.$$.fragment,l),n=!1},d(l){l&&_(t),ee(a,l)}}}function Ce(s){let e,t=[],a=new Map,n,l=ae(s[0]);const o=r=>r[3];for(let r=0;r<l.length;r+=1){let i=re(s,l,r),u=o(i);a.set(u,t[r]=oe(u,i))}return{c(){e=w("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=y(r,"DIV",{id:!0,class:!0});var i=C(e);for(let u=0;u<t.length;u+=1)t[u].l(i);i.forEach(_),this.h()},h(){g(e,"id","number-list"),g(e,"class","svelte-sj2c69")},m(r,i){N(r,e,i);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);n=!0},p(r,[i]){i&1&&(l=ae(r[0]),he(),t=me(t,i,o,1,r,l,a,e,pe,oe,null,re),ve())},i(r){if(!n){for(let i=0;i<l.length;i+=1)B(t[i]);n=!0}},o(r){for(let i=0;i<t.length;i+=1)j(t[i]);n=!1},d(r){r&&_(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function xe(s,e,t){let a;return O.subscribe(n=>{t(0,a=n)}),[a]}class Ve extends W{constructor(e){super(),F(this,e,xe,Ce,L,{})}}function Me(s){let e,t,a="You win!",n,l,o="New game",r,i;return{c(){e=w("div"),t=w("span"),t.textContent=a,n=V(),l=w("button"),l.textContent=o,this.h()},l(u){e=y(u,"DIV",{class:!0});var c=C(e);t=y(c,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-z3gzfw"&&(t.textContent=a),n=M(c),l=y(c,"BUTTON",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-1n1iytu"&&(l.textContent=o),c.forEach(_),this.h()},h(){g(t,"class","large-font svelte-1pgoqty"),g(l,"class","new-game svelte-1pgoqty"),g(e,"class","current-number svelte-1pgoqty")},m(u,c){N(u,e,c),m(e,t),m(e,n),m(e,l),r||(i=U(l,"click",s[4]),r=!0)},p:A,d(u){u&&_(e),r=!1,i()}}}function qe(s){let e,t,a="Current Number",n,l,o,r,i,u="No valid moves!",c,h,f="New game",d,v;return{c(){e=w("div"),t=w("span"),t.textContent=a,n=V(),l=w("span"),o=E(s[0]),r=V(),i=w("span"),i.textContent=u,c=V(),h=w("button"),h.textContent=f,this.h()},l(b){e=y(b,"DIV",{class:!0});var p=C(e);t=y(p,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1bqn36l"&&(t.textContent=a),n=M(p),l=y(p,"SPAN",{class:!0});var x=C(l);o=I(x,s[0]),x.forEach(_),r=M(p),i=y(p,"SPAN",{class:!0,"data-svelte-h":!0}),S(i)!=="svelte-128daax"&&(i.textContent=u),c=M(p),h=y(p,"BUTTON",{class:!0,"data-svelte-h":!0}),S(h)!=="svelte-1n1iytu"&&(h.textContent=f),p.forEach(_),this.h()},h(){g(t,"class","label"),g(l,"class","large-font svelte-1pgoqty"),g(i,"class","label"),g(h,"class","new-game svelte-1pgoqty"),g(e,"class","current-number svelte-1pgoqty")},m(b,p){N(b,e,p),m(e,t),m(e,n),m(e,l),m(l,o),m(e,r),m(e,i),m(e,c),m(e,h),d||(v=U(h,"click",s[4]),d=!0)},p(b,p){p&1&&D(o,b[0])},d(b){b&&_(e),d=!1,v()}}}function $e(s){let e;function t(l,o){return l[0]===null?Ee:Se}let a=t(s),n=a(s);return{c(){n.c(),e=H()},l(l){n.l(l),e=H()},m(l,o){n.m(l,o),N(l,e,o)},p(l,o){a===(a=t(l))&&n?n.p(l,o):(n.d(1),n=a(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){l&&_(e),n.d(l)}}}function Se(s){let e,t,a="Current Number",n,l,o,r,i,u="New game",c,h;return{c(){e=w("div"),t=w("span"),t.textContent=a,n=V(),l=w("span"),o=E(s[0]),r=V(),i=w("button"),i.textContent=u,this.h()},l(f){e=y(f,"DIV",{class:!0});var d=C(e);t=y(d,"SPAN",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1bqn36l"&&(t.textContent=a),n=M(d),l=y(d,"SPAN",{class:!0});var v=C(l);o=I(v,s[0]),v.forEach(_),r=M(d),i=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),S(i)!=="svelte-1n1iytu"&&(i.textContent=u),d.forEach(_),this.h()},h(){g(t,"class","label"),g(l,"class","large-font svelte-1pgoqty"),g(i,"class","new-game svelte-1pgoqty"),g(e,"class","current-number svelte-1pgoqty")},m(f,d){N(f,e,d),m(e,t),m(e,n),m(e,l),m(l,o),m(e,r),m(e,i),c||(h=U(i,"click",s[4]),c=!0)},p(f,d){d&1&&D(o,f[0])},d(f){f&&_(e),c=!1,h()}}}function Ee(s){let e,t="Start!",a,n;return{c(){e=w("button"),e.textContent=t,this.h()},l(l){e=y(l,"BUTTON",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-wyf3kq"&&(e.textContent=t),this.h()},h(){g(e,"class","start-button large-font svelte-1pgoqty")},m(l,o){N(l,e,o),a||(n=U(e,"click",s[3]),a=!0)},p:A,d(l){l&&_(e),a=!1,n()}}}function Ie(s){let e,t,a,n,l,o,r=s[2].filter(ue).length+"",i,u,c=s[2].length+"",h;function f(b,p){if(b[1]===P.ValidMoves)return $e;if(b[1]===P.NoValidMoves)return qe;if(b[1]===P.Win)return Me}let d=f(s),v=d&&d(s);return{c(){e=w("div"),t=w("div"),a=V(),v&&v.c(),n=V(),l=w("div"),o=E("Score: "),i=E(r),u=E("/"),h=E(c),this.h()},l(b){e=y(b,"DIV",{id:!0,class:!0});var p=C(e);t=y(p,"DIV",{}),C(t).forEach(_),a=M(p),v&&v.l(p),n=M(p),l=y(p,"DIV",{});var x=C(l);o=I(x,"Score: "),i=I(x,r),u=I(x,"/"),h=I(x,c),x.forEach(_),p.forEach(_),this.h()},h(){g(e,"id","right-panel"),g(e,"class","svelte-1pgoqty")},m(b,p){N(b,e,p),m(e,t),m(e,a),v&&v.m(e,null),m(e,n),m(e,l),m(l,o),m(l,i),m(l,u),m(l,h)},p(b,[p]){d===(d=f(b))&&v?v.p(b,p):(v&&v.d(1),v=d&&d(b),v&&(v.c(),v.m(e,n))),p&4&&r!==(r=b[2].filter(ue).length+"")&&D(i,r),p&4&&c!==(c=b[2].length+"")&&D(h,c)},i:A,o:A,d(b){b&&_(e),v&&v.d()}}}const ue=s=>s!==null;function Te(s,e,t){let a;R.subscribe(i=>{t(0,a=i)});let n;T.subscribe(i=>{t(1,n=i)});let l;return O.subscribe(i=>{t(2,l=i)}),[a,n,l,()=>{fe()},()=>be()]}class Ae extends W{constructor(e){super(),F(this,e,Te,Ie,L,{})}}function Pe(s){let e,t="1-to-20",a,n,l,o,r,i,u,c='built by <a href="https://fleetfoxx.dev/">fleetfoxx</a>',h;return l=new Ve({}),r=new Ae({}),{c(){e=w("h2"),e.textContent=t,a=V(),n=w("div"),X(l.$$.fragment),o=V(),X(r.$$.fragment),i=V(),u=w("footer"),u.innerHTML=c,this.h()},l(f){e=y(f,"H2",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1w31g2m"&&(e.textContent=t),a=M(f),n=y(f,"DIV",{id:!0,class:!0});var d=C(n);Z(l.$$.fragment,d),o=M(d),Z(r.$$.fragment,d),d.forEach(_),i=M(f),u=y(f,"FOOTER",{class:!0,"data-svelte-h":!0}),S(u)!=="svelte-sym46l"&&(u.innerHTML=c),this.h()},h(){g(e,"class","header svelte-40wj9"),g(n,"id","app-wrapper"),g(n,"class","svelte-40wj9"),g(u,"class","svelte-40wj9")},m(f,d){N(f,e,d),N(f,a,d),N(f,n,d),G(l,n,null),m(n,o),G(r,n,null),N(f,i,d),N(f,u,d),h=!0},p:A,i(f){h||(B(l.$$.fragment,f),B(r.$$.fragment,f),h=!0)},o(f){j(l.$$.fragment,f),j(r.$$.fragment,f),h=!1},d(f){f&&(_(e),_(a),_(n),_(i),_(u)),ee(l),ee(r)}}}class Be extends W{constructor(e){super(),F(this,e,null,Pe,L,{})}}export{Be as component};
